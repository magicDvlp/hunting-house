!function(){"use strict";var t,e={463:function(t,e,s){var i=s(477);class r extends EventTarget{constructor(t){if(super(),"object"==typeof r.instance)return r.instance;this.canvas=t,this._init(),r.instance=this}calculate(){this.canvasWidth=this.canvas.clientWidth,this.canvasHeight=this.canvas.clientHeight,this.pixelRatio=Math.min(window.devicePixelRatio,2),this.aspect=this.canvasWidth/this.canvasHeight,this.needResize=this.canvas.width!==this.canvasWidth||this.canvas.height!==this.canvasHeight}_resize(){this.calculate(),this.dispatchEvent(new Event("resize"))}_init(){this.calculate(),window.addEventListener("resize",(()=>this._resize()))}}var o=r;class a extends EventTarget{constructor(){if(super(),"object"===a.instance)return a.instance;this._init(),a.instance=this}tick(){this.dispatchEvent(new Event("tick")),window.requestAnimationFrame(this.tick.bind(this))}_init(){this.clock=new i.SUY,this.tick()}}var n=a;class h extends EventTarget{loaders={};items={};constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(super(),"object"==typeof h.instance)return h.instance;this.sources=t,this._init(),h.instance=this}_initLoaders(){this.loaders.textureLoader=new i.dpR}_startLoad(){this.sources.forEach((t=>{"texture"===t.type&&this.loaders.textureLoader.load(t.path,(e=>{this.items[t.name]=e}))}))}_init(){i.tEQ.onLoad=()=>{this.dispatchEvent(new Event("sourcesLoaded"))},this._initLoaders(),this._startLoad()}}var c=h,u=[{name:"groundColor",type:"texture",path:"img/ground/Ground_Grass_001_COLOR.jpg"},{name:"groundNormal",type:"texture",path:"img/ground/Ground_Grass_001_NORM.jpg"},{name:"groundRough",type:"texture",path:"img/ground/Ground_Grass_001_ROUGH.jpg"},{name:"groundOcc",type:"texture",path:"img/ground/Ground_Grass_001_OCC.jpg"},{name:"groundDisp",type:"texture",path:"img/ground/Ground_Grass_001_DISP.png"},{name:"bricksAmbientOcclusion",type:"texture",path:"img/bricks/Stylized_Bricks_001_ambientOcclusion.jpg"},{name:"bricksColor",type:"texture",path:"img/bricks/Stylized_Bricks_001_basecolor.jpg"},{name:"bricksHeight",type:"texture",path:"img/bricks/Stylized_Bricks_001_height.png"},{name:"bricksNormal",type:"texture",path:"img/bricks/Stylized_Bricks_001_normal.jpg"},{name:"bricksRoughness",type:"texture",path:"img/bricks/Stylized_Bricks_001_roughness.jpg"},{name:"roofAmbientOcclusion",type:"texture",path:"img/roof/Roof_Tiles_Terracotta_003_ambientOcclusion.jpg"},{name:"roofColor",type:"texture",path:"img/roof/Roof_Tiles_Terracotta_003_basecolor.jpg"},{name:"roofHeight",type:"texture",path:"img/roof/Roof_Tiles_Terracotta_003_height.png"},{name:"roofNormal",type:"texture",path:"img/roof/Roof_Tiles_Terracotta_003_normal.jpg"},{name:"roofRoughness",type:"texture",path:"img/roof/Roof_Tiles_Terracotta_003_roughness.jpg"},{name:"doorAmbient",type:"texture",path:"img/door/Door_Wood_001_ambientOcclusion.jpg"},{name:"doorColor",type:"texture",path:"img/door/Door_Wood_001_basecolor.jpg"},{name:"doorHeight",type:"texture",path:"img/door/Door_Wood_001_height.png"},{name:"doorMetalic",type:"texture",path:"img/door/Door_Wood_001_metallic.jpg"},{name:"doorNormal",type:"texture",path:"img/door/Door_Wood_001_normal.jpg"},{name:"doorOpacity",type:"texture",path:"img/door/Door_Wood_001_opacity.jpg"},{name:"doorRoughness",type:"texture",path:"img/door/Door_Wood_001_roughness.jpg"}],l=s(637);class d{isActive="#debug"===window.location.hash;constructor(){if("object"==typeof d.instance)return d.instance;this.isActive&&(this.gui=new l.ZP),d.instance=this}}var p=d,g=s(365);window.addEventListener("load",(function(){const t=document.querySelector("#canvas");t&&new class{constructor(t){t?(this.canvas=t,this._init()):console.error("You must pass canvas!")}_resize(t){const{needResize:e,aspect:s,canvasWidth:i,canvasHeight:r}=t.target;e&&(this.camera.resize(s),this.renderer.resize(i,r))}_update(t){this.renderer.update(this.scene,this.camera.instance)}_init(){this.debug=new p,this.time=new n,this.resources=new c(u),this.sizes=new o(this.canvas),this.scene=new i.xsS,this.scene.fog=new i.ybr("#262837",1,15),this.camera=new class{params={fov:75,aspect:2,near:.1,far:100};constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.params={...this.params,...t},this.instance=new i.cPb(this.params.fov,this.params.aspect,this.params.near,this.params.far),this.instance.position.set(4,2,5),this.instance.lookAt(0,0,0)}resize(t){this.instance.aspect=t,this.instance.updateProjectionMatrix()}}({aspect:this.sizes.aspect}),this.renderer=new class{constructor(t){this.canvas=t,this.sizes=new o,this.instance=new i.CP7({antialias:!0,canvas:this.canvas}),this.instance.setSize(this.sizes.canvasWidth,this.sizes.canvasHeight,!1),this.instance.setPixelRatio(this.sizes.pixelRatio),this.instance.physicallyCorrectLights=!0,this.instance.outputEncoding=i.YGz,this.instance.toneMappingExposure=1.75,this.instance.shadowMap.enabled=!0,this.instance.shadowMap.type=i.ntZ}resize(t,e){this.instance.setSize(t,e,!1)}update(t,e){this.instance.render(t,e)}}(this.canvas),this.renderer.update(this.scene,this.camera.instance),this.renderer.instance.setClearColor("#262837"),this.orbitControls=new g.z(this.camera.instance,this.canvas),this.orbitControls.enableDamping=!0,this.sizes.addEventListener("resize",this._resize.bind(this)),this.time.addEventListener("tick",this._update.bind(this)),this.resources.addEventListener("sourcesLoaded",(t=>{this.world=new class{constructor(t,e){this.scene=t,this.textures=e,this.#t()}#e(){this.bushCreator=new class{constructor(){this.bushGeometry=new i.xo$(1,16,16),this.bushMaterial=new i.Wid({color:"#89c854"}),this.bush=new i.Kj0(this.bushGeometry,this.bushMaterial)}getBush(){return new i.Kj0(this.bushGeometry,this.bushMaterial)}},this.bush=this.bushCreator.getBush(),this.bush.castShadow=!0,this.bush.scale.set(.5,.5,.5),this.bush.position.set(.8,.2,2.2),this.scene.add(this.bush),this.bush2=this.bushCreator.getBush(),this.bush2.castShadow=!0,this.bush2.scale.set(.25,.25,.25),this.bush2.position.set(1.4,.1,2.1),this.scene.add(this.bush2)}#t(){this.ground=new class{constructor(t){this.resources=t,this._init()}setTextures(){this.textures={},this.textures.color=this.resources.groundColor,this.textures.color.encoding=i.knz,this.textures.color.repeat.set(5,5),this.textures.color.wrapS=i.rpg,this.textures.color.wrapT=i.rpg,this.textures.normal=this.resources.groundNormal,this.textures.normal.repeat.set(5,5),this.textures.normal.wrapS=i.rpg,this.textures.normal.wrapT=i.rpg,this.textures.aO=this.resources.groundOcc,this.textures.aO.repeat.set(5,5),this.textures.aO.wrapS=i.rpg,this.textures.aO.wrapT=i.rpg,this.textures.roughness=this.resources.groundRough,this.textures.roughness.repeat.set(5,5),this.textures.roughness.wrapS=i.rpg,this.textures.roughness.wrapT=i.rpg}createPlane(){this.geometry=new i._12(20,20),this.geometry.setAttribute("uv2",new i.TlE(this.geometry.attributes.uv.array,2)),this.material=new i.Wid({map:this.textures.color,normalMap:this.textures.normal,side:i.ehD,aoMap:this.textures.aO,aoMapIntensity:1,roughnessMap:this.textures.roughness}),this.mesh=new i.Kj0(this.geometry,this.material),this.mesh.receiveShadow=!0,this.mesh.rotateX(.5*Math.PI),this.mesh.position.y=0}_setUpDebug(){this.debug=new p,this.debug.isActive&&(this.guiFolder=this.debug.gui.addFolder("Ground"),this.guiFolder.add(this.material,"aoMapIntensity").name("ambientOcclusionIntensity").min(1).max(30).step(.3))}_init(){this.setTextures(),this.createPlane(),this._setUpDebug()}}(this.textures),this.scene.add(this.ground.mesh),this.environment=new class{constructor(t){this.scene=t,this.light=new class{constructor(t){this.scene=t,this._init()}_debugInit(){this.debug=new p,this.debug.isActive&&(this.guiFolder=this.debug.gui.addFolder("Light"),this.guiFolder.add(this.ambientLight,"intensity").name("ambientLight").min(.1).max(2).step(.1),this.guiFolder.add(this.directionLight,"intensity").name("moonLight").min(.1).max(2).step(.1))}_init(){this.ambientLight=new i.Mig("#b9d5ff",.3),this.scene.add(this.ambientLight),this.directionLight=new i.Ox3("#b9d5ff",.5),this.directionLight.position.set(3,3,-1),this.directionLight.castShadow=!0,this.scene.add(this.directionLight),this._debugInit()}}(this.scene)}}(this.scene),this.house=new class{constructor(t){this.resources=t,this._init()}_setWallTextures(){this.wallTextures={},this.wallTextures.color=this.resources.bricksColor,this.wallTextures.color.encoding=i.knz,this.wallTextures.color.repeat.set(2,2),this.wallTextures.color.wrapS=i.rpg,this.wallTextures.color.wrapT=i.rpg,this.wallTextures.normal=this.resources.bricksNormal,this.wallTextures.normal.repeat.set(2,2),this.wallTextures.normal.wrapS=i.rpg,this.wallTextures.normal.wrapT=i.rpg,this.wallTextures.aO=this.resources.bricksAmbientOcclusion,this.wallTextures.aO.repeat.set(2,2),this.wallTextures.aO.wrapS=i.rpg,this.wallTextures.aO.wrapT=i.rpg,this.wallTextures.roughness=this.resources.bricksRoughness,this.wallTextures.roughness.repeat.set(2,2),this.wallTextures.roughness.wrapS=i.rpg,this.wallTextures.roughness.wrapT=i.rpg}_setRoofTextures(){this.roofTextures={},this.roofTextures.color=this.resources.roofColor,this.roofTextures.color.encoding=i.knz,this.roofTextures.color.repeat.set(3,3),this.roofTextures.color.center.x=.5,this.roofTextures.color.center.y=.5,this.roofTextures.color.rotation=.1*-Math.PI,this.roofTextures.color.wrapS=i.rpg,this.roofTextures.color.wrapT=i.rpg,this.roofTextures.normal=this.resources.roofNormal,this.roofTextures.normal.repeat.set(3,3),this.roofTextures.normal.center.x=.5,this.roofTextures.normal.center.y=.5,this.roofTextures.normal.rotation=.1*-Math.PI,this.roofTextures.normal.wrapS=i.rpg,this.roofTextures.normal.wrapT=i.rpg,this.roofTextures.aO=this.resources.roofAmbientOcclusion,this.roofTextures.aO.repeat.set(3,3),this.roofTextures.aO.center.x=.5,this.roofTextures.aO.center.y=.5,this.roofTextures.aO.rotation=.1*-Math.PI,this.roofTextures.aO.wrapS=i.rpg,this.roofTextures.aO.wrapT=i.rpg,this.roofTextures.roughness=this.resources.roofRoughness,this.roofTextures.roughness.repeat.set(3,3),this.roofTextures.roughness.center.x=.5,this.roofTextures.roughness.center.y=.5,this.roofTextures.roughness.rotation=.1*-Math.PI,this.roofTextures.roughness.wrapS=i.rpg,this.roofTextures.roughness.wrapT=i.rpg}_setDoorTextures(){this.doorTextures={},this.doorTextures.color=this.resources.doorColor,this.doorTextures.encoding=i.knz,this.doorTextures.ambiant=this.resources.doorAmbient,this.doorTextures.normal=this.resources.doorNormal,this.doorTextures.alpha=this.resources.doorOpacity,this.doorTextures.displacementMap=this.resources.doorHeight,this.doorTextures.metalness=this.resources.doorMetalic,this.doorTextures.roughness=this.resources.doorRoughness}createRoof(){const t=new i.b_z(3.5,1,4);t.setAttribute("uv2",new i.TlE(t.attributes.uv.array,2));const e=new i.Wid({map:this.roofTextures.color,normalMap:this.roofTextures.norma,aoMap:this.roofTextures.aO,roughnessMap:this.roofTextures.roughness});return new i.Kj0(t,e)}createWalls(){const t=new i.nvb(4,2.5,4,40,40,40);return t.setAttribute("uv2",new i.TlE(t.attributes.uv.array,2)),this.wallsMaterial=new i.Wid({map:this.wallTextures.color,normalMap:this.wallTextures.normal,aoMap:this.wallTextures.aO,roughnessMap:this.wallTextures.roughness}),new i.Kj0(t,this.wallsMaterial)}createDoor(){const t=new i._12(2,2,100,100);t.setAttribute("uv2",new i.TlE(t.attributes.uv.array,2));const e=new i.Wid({map:this.doorTextures.color,aoMap:this.doorTextures.ambiant,normalMap:this.doorTextures.normal,transparent:!0,alphaMap:this.doorTextures.alpha,displacementMap:this.doorTextures.displacementMap,displacementScale:.1,metalnessMap:this.doorTextures.metalness,roughnessMap:this.doorTextures.roughness});return new i.Kj0(t,e)}createDorLight(){return new i.cek("#ff7d46",2,9)}buildHouse(){const t=new i.ZAu;return this.walls=this.createWalls(),this.walls.castShadow=!0,this.walls.position.y=1.25,t.add(this.walls),this.roof=this.createRoof(),this.roof.position.y=3,this.roof.rotateY(.25*Math.PI),t.add(this.roof),this.door=this.createDoor(),this.door.position.z=2.01,this.door.position.y=this.door.geometry.parameters.height/2,t.add(this.door),this.doorLight=this.createDorLight(),this.doorLight.castShadow=!0,this.doorLight.position.set(0,2,2.5),t.add(this.doorLight),t}_debugInit(){if(this.debug=new p,this.debug.isActive){this.guiFolder=this.debug.gui.addFolder("House");const t={value:1};this.guiFolder.add(t,"value").name("wallNormalScale").min(.1).max(1).step(.1).onChange((()=>{this.wallsMaterial.normalScale.set(t.value,t.value)}))}}_init(){this._setWallTextures(),this._setRoofTextures(),this._setDoorTextures(),this.house=this.buildHouse(),this._debugInit()}}(this.textures),this.scene.add(this.house.house),this.#e(),this.grave=new class{#s=new i.DvJ(.6,.8,.2);#i=new i.Wid({color:"#b2b6b1"});constructor(t){this.scene=t,this.graves=new i.ZAu,this.#t(),this.scene.add(this.graves)}#t(){for(let t=0;t<50;t++){const t=Math.random()*Math.PI*2,e=3+6*Math.random(),s=Math.sin(t)*e,r=Math.cos(t)*e,o=new i.Kj0(this.#s,this.#i);o.castShadow=!0,o.position.set(s,.3,r),o.rotation.y=.4*(Math.random()-.5),o.rotation.z=.4*(Math.random()-.5),this.graves.add(o)}}}(this.scene),this.ghosts=new class{constructor(t){this.scene=t,this.time=new n,this.#t()}#r(t){const e={color:"ff00ff",intensity:3,distance:3,...t},{color:s,intensity:r,distance:o}=e;return new i.cek(s,r,o)}#t(){this.ghost1=this.#r(),this.ghost1.castShadow=!0,this.ghost2=this.#r({color:"#00ffff"}),this.ghost2.castShadow=!0,this.ghost3=this.#r({color:"#ff7800"}),this.ghost3.castShadow=!0,this.scene.add(this.ghost1),this.scene.add(this.ghost2),this.scene.add(this.ghost3),console.log(this.time),this.time.addEventListener("tick",(()=>{const t=this.time.clock.getElapsedTime(),e=.5*t;this.ghost1.position.x=4*Math.cos(e),this.ghost1.position.y=3*Math.sin(e),this.ghost1.position.z=Math.sin(3*e);const s=.33*-t;this.ghost2.position.x=5*Math.cos(s),this.ghost2.position.y=5*Math.sin(s),this.ghost2.position.z=Math.sin(3*s)+Math.sin(2.5*t);const i=.18*-t;this.ghost3.position.x=Math.cos(i)*(7+Math.sin(.32*t)),this.ghost3.position.y=Math.sin(i)*(7+Math.sin(.5*t)),this.ghost3.position.z=Math.sin(4*t)+Math.sin(2.5*t)}))}}(this.scene)}}(this.scene,this.resources.items)}))}}(t),document.documentElement.classList.remove("html-hidden")}))}},s={};function i(t){var r=s[t];if(void 0!==r)return r.exports;var o=s[t]={exports:{}};return e[t](o,o.exports,i),o.exports}i.m=e,t=[],i.O=function(e,s,r,o){if(!s){var a=1/0;for(u=0;u<t.length;u++){s=t[u][0],r=t[u][1],o=t[u][2];for(var n=!0,h=0;h<s.length;h++)(!1&o||a>=o)&&Object.keys(i.O).every((function(t){return i.O[t](s[h])}))?s.splice(h--,1):(n=!1,o<a&&(a=o));if(n){t.splice(u--,1);var c=r();void 0!==c&&(e=c)}}return e}o=o||0;for(var u=t.length;u>0&&t[u-1][2]>o;u--)t[u]=t[u-1];t[u]=[s,r,o]},i.d=function(t,e){for(var s in e)i.o(e,s)&&!i.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},function(){var t={592:0};i.O.j=function(e){return 0===t[e]};var e=function(e,s){var r,o,a=s[0],n=s[1],h=s[2],c=0;if(a.some((function(e){return 0!==t[e]}))){for(r in n)i.o(n,r)&&(i.m[r]=n[r]);if(h)var u=h(i)}for(e&&e(s);c<a.length;c++)o=a[c],i.o(t,o)&&t[o]&&t[o][0](),t[o]=0;return i.O(u)},s=self.webpackChunkname=self.webpackChunkname||[];s.forEach(e.bind(null,0)),s.push=e.bind(null,s.push.bind(s))}();var r=i.O(void 0,[977],(function(){return i(463)}));r=i.O(r)}();